# Cè¯­è¨€æ™ºèƒ½ä»£ç åˆ†æè°ƒè¯•å·¥å…· (Code Repo Learner)

## é¡¹ç›®æ¦‚è¿°

**Code Repo Learner** æ˜¯ä¸€ä¸ªåŸºäºAIçš„Cè¯­è¨€ä»£ç åˆ†æè°ƒè¯•å·¥å…·ï¼Œç»“åˆTree-sitterè¯­æ³•åˆ†æã€Neo4jå›¾æ•°æ®åº“å’ŒLLMæ™ºèƒ½é—®ç­”æŠ€æœ¯ï¼Œä¸ºå¼€å‘è€…æä¾›æ™ºèƒ½çš„ä»£ç ç†è§£å’Œè°ƒè¯•åŠ©æ‰‹ã€‚

### æ ¸å¿ƒåŠŸèƒ½

ğŸ” **æ™ºèƒ½ä»£ç è§£æ**
- ä½¿ç”¨Tree-sitterå‡†ç¡®è§£æCè¯­è¨€ä»£ç ç»“æ„
- æå–å‡½æ•°å®šä¹‰ã€å˜é‡å£°æ˜ã€è°ƒç”¨å…³ç³»ç­‰ä¿¡æ¯
- æ„å»ºå®Œæ•´çš„ä»£ç ä¾èµ–å…³ç³»å›¾

ğŸ“Š **çŸ¥è¯†å›¾è°±æ„å»º**
- åŸºäºNeo4jå­˜å‚¨ä»£ç å…³ç³»æ•°æ®
- æ”¯æŒå¤æ‚çš„å›¾æŸ¥è¯¢å’Œå…³ç³»åˆ†æ
- å¯è§†åŒ–ä»£ç ç»“æ„å’Œä¾èµ–å…³ç³»

ğŸ§  **AIé©±åŠ¨çš„æ™ºèƒ½åˆ†æ**
- LLMç”Ÿæˆä»£ç æ‘˜è¦å’Œå‘é‡åµŒå…¥
- è¯­ä¹‰çº§ä»£ç æœç´¢å’Œç›¸ä¼¼æ€§æ¨è
- è‡ªç„¶è¯­è¨€é—®ç­”å’Œè°ƒè¯•å»ºè®®

âš¡ **å¢é‡å¤„ç†ä¼˜åŒ–**
- åŸºäºGitå˜æ›´çš„å¢é‡åˆ†æ
- æ™ºèƒ½ç¼“å­˜æœºåˆ¶æå‡æ€§èƒ½
- æ”¯æŒå¤§è§„æ¨¡é¡¹ç›®å¤„ç†

## æŠ€æœ¯äº®ç‚¹

### ğŸ—ï¸ **æŠ€æœ¯æ¶æ„**
- **æ¨¡å—åŒ–å•ä½“æ¶æ„**ï¼šæ¸…æ™°çš„æ¨¡å—è¾¹ç•Œï¼Œæ˜“äºç»´æŠ¤
- **æœ¬åœ°éƒ¨ç½²**ï¼šæ‰€æœ‰å¤„ç†åœ¨æœ¬åœ°è¿›è¡Œï¼Œä¿æŠ¤ä»£ç éšç§
- **è·¨å¹³å°æ”¯æŒ**ï¼šå…¼å®¹Windowsã€Linuxã€macOS

### ğŸ› ï¸ **æŠ€æœ¯æ ˆ**
- **åç«¯**ï¼šPython 3.9+ (å¼‚æ­¥å¤„ç†ï¼Œç±»å‹æç¤º)
- **ä»£ç è§£æ**ï¼šTree-sitter + tree-sitter-c
- **å›¾æ•°æ®åº“**ï¼šNeo4j Community Edition
- **å‘é‡æ•°æ®åº“**ï¼šChroma
- **AIæ¨¡å‹**ï¼šjina-embeddings-v2-base-code, CodeBERT
- **CLIæ¡†æ¶**ï¼šClick

## å®‰è£…å’Œä½¿ç”¨

### ç¯å¢ƒè¦æ±‚
- **Python 3.11+** (æ¨èä½¿ç”¨uvè™šæ‹Ÿç¯å¢ƒ)
- **Ubuntu 24.04 LTS** (WSL2 å·²éªŒè¯å…¼å®¹)
- **Neo4j Community Edition 5.26+** (Dockerå®¹å™¨éƒ¨ç½²)
- **Git**
- **8GB+ RAM** (æ¨è)

### Ubuntuç¯å¢ƒå®‰è£…

#### 1. åˆ›å»ºPythonè™šæ‹Ÿç¯å¢ƒ
```bash
# åˆ›å»ºuvè™šæ‹Ÿç¯å¢ƒ
uv venv --python 3.11

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate

# éªŒè¯Pythonç‰ˆæœ¬
python --version  # åº”è¯¥æ˜¯3.11+
```

#### 2. å®‰è£…æ ¸å¿ƒä¾èµ–
```bash
# Tree-sitter (Cè¯­è¨€è§£æå™¨)
sudo apt install libtree-sitter-dev
pip install tree-sitter tree-sitter-c

# Chromaå‘é‡æ•°æ®åº“
pip install chromadb>=1.0.13

# jina-embeddingsæ¨¡å‹
pip install -U sentence-transformers>=3.0.0

# å…¶ä»–ä¾èµ–
pip install click pytest flake8 mypy pyyaml requests neo4j>=5.25.0
```

#### 3. å¯åŠ¨Neo4j (Dockerå®¹å™¨)
```bash
# åˆ›å»ºæ•°æ®å·
docker volume create neo4j_data

# å¯åŠ¨Neo4jå®¹å™¨
docker run -d --name neo4j-community \
  -p 7474:7474 -p 7687:7687 \
  -v neo4j_data:/data \
  -e NEO4J_AUTH=neo4j/<your password> \
  neo4j:5.26-community

# è®¿é—®Webç•Œé¢
curl http://localhost:7474
```

### ğŸ¯ POCç›®æ ‡

è¯æ˜Tree-sitter + Neo4j + Chroma + OpenRouterèƒ½ååŒå·¥ä½œï¼Œå®Œæˆä¸€ä¸ªä¸­å‹é¡¹ç›®ï¼ˆCè¯­è¨€ï¼‰è§£æåˆ°é—®ç­”çš„ç«¯åˆ°ç«¯æµç¨‹ã€‚

**æµ‹è¯•é¡¹ç›®ï¼š** OpenSBI (RISC-Vå¼€æºå›ºä»¶)
- é¡¹ç›®è§„æ¨¡ï¼š289ä¸ªæ–‡ä»¶ï¼Œ48,744è¡Œä»£ç 
- é¡¹ç›®è·¯å¾„ï¼š`reference_code_repo/opensbi/`
- æ ¸å¿ƒæŠ€æœ¯ï¼šTree-sitter-c + Neo4j + Chroma + OpenRouter (google/gemini-2.0-flash-001)

### å¿«é€Ÿå¼€å§‹ (POCç‰ˆæœ¬)

```bash
# åˆ†æOpenSBIé¡¹ç›®
code-learner analyze reference_code_repo/opensbi/

# åŸºæœ¬é—®ç­”
code-learner ask "OpenSBIé¡¹ç›®çš„ä¸»è¦æ¨¡å—æœ‰å“ªäº›ï¼Ÿ"
code-learner ask "sbi_initå‡½æ•°åœ¨å“ªé‡Œå®šä¹‰ï¼Ÿ"

# åˆå§‹åŒ–ç¯å¢ƒ
code-learner setup
```

### ä¸»è¦å‘½ä»¤

#### ğŸ“Š åˆ†æå‘½ä»¤
```bash
# å®Œæ•´åˆ†æ
code-learner analyze /path/to/repo

# å¢é‡åˆ†æ
code-learner analyze /path/to/repo --incremental

# åˆ†æç‰¹å®šæ–‡ä»¶
code-learner analyze /path/to/repo --files "src/*.c"
```

#### ğŸ” æŸ¥è¯¢å‘½ä»¤
```bash
# è‡ªç„¶è¯­è¨€æŸ¥è¯¢
code-learner query "find buffer overflow vulnerabilities"

# å‡½æ•°è°ƒç”¨å…³ç³»æŸ¥è¯¢
code-learner query --type calls --function malloc

# ç›¸ä¼¼ä»£ç æœç´¢
code-learner query --type similar --code "for(int i=0; i<n; i++)"
```

#### ğŸ› è°ƒè¯•å‘½ä»¤
```bash
# è°ƒè¯•åŠ©æ‰‹æ¨¡å¼
code-learner debug --error "segmentation fault" --context "main.c:42"

# äº¤äº’å¼è°ƒè¯•
code-learner debug --interactive

# æ—¥å¿—åˆ†æ
code-learner debug --log error.log
```

## é¡¹ç›®ç»“æ„

```
code-repo-learner/
â”œâ”€â”€ dev-docs/                  # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ 00_prd.md              # äº§å“éœ€æ±‚æ–‡æ¡£
â”‚   â”œâ”€â”€ 01_architecture.md     # æŠ€æœ¯æ¶æ„æ–‡æ¡£
â”‚   â””â”€â”€ checklists/            # è´¨é‡æ£€æŸ¥æ¸…å•
â”œâ”€â”€ src/                       # æºä»£ç 
â”‚   â””â”€â”€ code_learner/          # ä¸»è¦åŒ…
â”‚       â”œâ”€â”€ cli/               # å‘½ä»¤è¡Œæ¥å£
â”‚       â”œâ”€â”€ parser/            # ä»£ç è§£æå¼•æ“
â”‚       â”œâ”€â”€ graph/             # å›¾æ•°æ®åº“æ“ä½œ
â”‚       â”œâ”€â”€ embeddings/        # å‘é‡åµŒå…¥
â”‚       â””â”€â”€ query/             # æŸ¥è¯¢åˆ†æå¼•æ“
â”œâ”€â”€ tests/                     # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ config/                    # é…ç½®æ–‡ä»¶
```

## å¼€å‘è®¡åˆ’

### ğŸ“‹ å¼€å‘é˜¶æ®µ (Epics)

1. **Epic 1: ä»£ç è§£æä¸ç»“æ„åˆ†æå¼•æ“**
   - Tree-sitteré›†æˆå’ŒCè¯­è¨€è¯­æ³•è§£æ
   - ä»£ç ç»“æ„æå–å’Œå…³ç³»å»ºæ¨¡

2. **Epic 2: çŸ¥è¯†å›¾è°±æ„å»ºä¸å­˜å‚¨ç³»ç»Ÿ**
   - Neo4jé›†æˆå’Œæ•°æ®å»ºæ¨¡
   - å›¾æŸ¥è¯¢å’Œå…³ç³»åˆ†æ

3. **Epic 3: æ™ºèƒ½åµŒå…¥ä¸å‘é‡æœç´¢ç³»ç»Ÿ**
   - LLMé›†æˆå’Œå‘é‡ç”Ÿæˆ
   - è¯­ä¹‰æœç´¢å’Œç›¸ä¼¼æ€§åˆ†æ

4. **Epic 4: AIè°ƒè¯•åŠ©æ‰‹ä¸é—®ç­”ç³»ç»Ÿ**
   - æ™ºèƒ½é—®ç­”å’Œè°ƒè¯•å»ºè®®
   - è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ”¯æŒ

5. **Epic 5: æ€§èƒ½ä¼˜åŒ–ä¸å¢é‡å¤„ç†**
   - ç¼“å­˜æœºåˆ¶å’Œå¢é‡åˆ†æ
   - å¤§è§„æ¨¡é¡¹ç›®æ”¯æŒ

### ğŸ¯ å¼€å‘åŸåˆ™
- **TDDé©±åŠ¨**ï¼šæµ‹è¯•ä¼˜å…ˆçš„å¼€å‘æ–¹æ³•
- **KISSåŸåˆ™**ï¼šä¿æŒç®€å•ï¼Œé¿å…è¿‡åº¦è®¾è®¡
- **SOLIDåŸåˆ™**ï¼šä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤
- **å¢é‡å¼€å‘**ï¼šé€æ­¥è¿­ä»£ï¼ŒæŒç»­é›†æˆ

## æ€§èƒ½æŒ‡æ ‡

### ğŸ“Š ç›®æ ‡æ€§èƒ½
- å•æ–‡ä»¶è§£ææ—¶é—´ï¼š< 1ç§’
- å¤§å‹é¡¹ç›®å¤„ç†ï¼š< 30åˆ†é’Ÿ (10ä¸‡è¡Œä»£ç )
- æŸ¥è¯¢å“åº”æ—¶é—´ï¼š< 3ç§’
- ä»£ç è§£æå‡†ç¡®ç‡ï¼š> 95%

### ğŸš€ ä¼˜åŒ–ç‰¹æ€§
- å¹¶è¡Œå¤„ç†å¤šä¸ªæ–‡ä»¶
- æ™ºèƒ½ç¼“å­˜å‡å°‘é‡å¤è®¡ç®—
- æµå¼å¤„ç†æ§åˆ¶å†…å­˜ä½¿ç”¨
- å¢é‡åˆ†æåªå¤„ç†å˜æ›´

## è´¡çŒ®æŒ‡å—

### ğŸ”§ å¼€å‘ç¯å¢ƒè®¾ç½®
```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-org/code-repo-learner.git
cd code-repo-learner

# å®‰è£…å¼€å‘ä¾èµ–
pip install -e .[dev]

# è¿è¡Œæµ‹è¯•
pytest

# ä»£ç è´¨é‡æ£€æŸ¥
flake8 src/
mypy src/
```

### ğŸ“ ä»£ç è§„èŒƒ
- éµå¾ªPEP 8ä»£ç é£æ ¼
- ä½¿ç”¨ç±»å‹æç¤º
- ç¼–å†™è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²
- ä¿æŒå•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 90%

## è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## è”ç³»æ–¹å¼

- é¡¹ç›®æ–‡æ¡£ï¼š[dev-docs/](dev-docs/)
- é—®é¢˜åé¦ˆï¼š[GitHub Issues](https://github.com/your-org/code-repo-learner/issues)

---

*è¿™ä¸ªå·¥å…·æ—¨åœ¨æå‡Cè¯­è¨€å¼€å‘è€…çš„ä»£ç ç†è§£å’Œè°ƒè¯•æ•ˆç‡ï¼Œé€šè¿‡AIæŠ€æœ¯é™ä½ä»£ç ç»´æŠ¤çš„å¤æ‚åº¦ã€‚* 